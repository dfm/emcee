<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>emcee &mdash; emcee 2.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="emcee 2.1.0 documentation" href="#" />
    <link rel="next" title="Installation" href="user/install/" />
     
    
    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    <script type="text/javascript" src="//use.typekit.com/phg8fgl.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    <link href="http://fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700|Alegreya+SC:400,700" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="_static/favicon.png">


  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="user/install/" title="Installation"
             accesskey="N">next</a> |</li>
        <li><a href="#">emcee 2.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="emcee">
<h1>emcee<a class="headerlink" href="#emcee" title="Permalink to this headline">¶</a></h1>
<div class="section" id="seriously-kick-ass-mcmc">
<h2>Seriously Kick-Ass MCMC<a class="headerlink" href="#seriously-kick-ass-mcmc" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">emcee</span></tt> is an MIT licensed pure-Python implementation of Goodman &amp; Weare&#8217;s
<a class="reference external" href="http://msp.berkeley.edu/camcos/2010/5-1/p04.xhtml">Affine Invariant Markov chain Monte Carlo (MCMC) Ensemble sampler</a> and these pages will
show you how to use it.</p>
<p>This documentation won&#8217;t teach you too much about MCMC but there are a lot
of resources available for that (try <a class="reference external" href="http://www.inference.phy.cam.ac.uk/mackay/itila/book.html">this one</a>).
We also <a class="reference external" href="http://arxiv.org/abs/1202.3665">publlished a paper</a> explaining
the <tt class="docutils literal"><span class="pre">emcee</span></tt> algorithm and implementation in detail.</p>
<p>emcee has been used in <a class="reference external" href="testimonials">quite a few projects in the astrophysical literature</a> and it is being actively developed on <a class="reference external" href="https://github.com/dfm/emcee">GitHub</a>.</p>
</div>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>If you wanted to draw samples from a 10 dimensional Gaussian, you would do
something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">emcee</span>

<span class="k">def</span> <span class="nf">lnprob</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ivar</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">ivar</span> <span class="o">*</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">ndim</span><span class="p">,</span> <span class="n">nwalkers</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span>
<span class="n">ivar</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span>
<span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nwalkers</span><span class="p">)]</span>

<span class="n">sampler</span> <span class="o">=</span> <span class="n">emcee</span><span class="o">.</span><span class="n">EnsembleSampler</span><span class="p">(</span><span class="n">nwalkers</span><span class="p">,</span> <span class="n">ndim</span><span class="p">,</span> <span class="n">lnprob</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">ivar</span><span class="p">])</span>
<span class="n">sampler</span><span class="o">.</span><span class="n">run_mcmc</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>A more complete example is available in the <a class="reference external" href="user/quickstart">quickstart documentation</a>.</p>
</div>
<div class="section" id="user-guide">
<h2>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="user/install/">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/install/#using-pip">Using pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#from-source">From source</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#bleeding-edge-development-version">Bleeding edge development version</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#test-the-installation">Test the installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/quickstart/">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/quickstart/#how-to-sample-a-multi-dimensional-gaussian">How to sample a multi-dimensional Gaussian</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/line/">Example: Fitting a Model to Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/line/#the-generative-probabilistic-model">The generative probabilistic model</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/line/#maximum-likelihood-estimation">Maximum likelihood estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/line/#marginalization-uncertainty-estimation">Marginalization &amp; uncertainty estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/line/#results">Results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/advanced/">Advanced Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#incrementally-saving-progress">Incrementally saving progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#multiprocessing">Multiprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#arbitrary-metadata-blobs">Arbitrary metadata blobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#using-mpi-to-distribute-the-computations">Using MPI to distribute the computations</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/advanced/#loadbalancing-in-parallel-runs">Loadbalancing in parallel runs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/pt/">Parallel-Tempering Ensemble MCMC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/pt/#how-to-sample-a-multi-modal-gaussian">How To Sample a Multi-Modal Gaussian</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/pt/#implementation-notes">Implementation Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/faq/">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#what-are-walkers">What are &#8220;walkers&#8221;?</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#how-should-i-initialize-the-walkers">How should I initialize the walkers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#wrapping-c-code">Wrapping C++ code</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#parameter-limits">Parameter limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/faq/#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/#the-affine-invariant-ensemble-sampler">The Affine-Invariant Ensemble Sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#the-parallel-tempered-ensemble-sampler">The Parallel-Tempered Ensemble Sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#standard-metropolis-hastings-sampler">Standard Metropolis-Hastings Sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#abstract-sampler-object">Abstract Sampler Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#autocorrelation-analysis">Autocorrelation Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#utilities">Utilities</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<p>Author:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/dfm">Dan Foreman-Mackey (NYU)</a></li>
</ul>
<p>Direct contributions to the code base:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/RuthAngus">Ruth Angus (Oxford)</a></li>
<li><a class="reference external" href="https://github.com/bencebeky">Bence Béky (Harvard)</a></li>
<li><a class="reference external" href="https://github.com/fredRos">Frederik Beaujean (MPI for Physics)</a></li>
<li><a class="reference external" href="https://github.com/aconley">Alex Conley (U Colorado, Boulder)</a></li>
<li><a class="reference external" href="https://github.com/farr">Will Meierjurgen Farr (Northwestern)</a></li>
<li><a class="reference external" href="https://github.com/demitri">Demitri Muna (OSU)</a></li>
<li><a class="reference external" href="https://github.com/davidwhogg">David W. Hogg (NYU)</a></li>
<li><a class="reference external" href="https://github.com/dstndstn">Dustin Lang (Princeton/CMU)</a></li>
<li><a class="reference external" href="https://github.com/drphilmarshall">Phil Marshall (Oxford)</a></li>
<li><a class="reference external" href="https://github.com/adrn">Adrian Price-Whelan (Columbia)</a></li>
<li><a class="reference external" href="https://github.com/jeremysanders">Jeremy Sanders (Cambridge)</a></li>
<li><a class="reference external" href="https://github.com/lpsinger">Leo Singer (Caltech)</a></li>
<li><a class="reference external" href="https://bitbucket.org/manodeep/">Manodeep Sinha (Vanderbilt)</a></li>
<li><a class="reference external" href="mindriot101">Simon Walker</a></li>
<li><a class="reference external" href="https://github.com/joezuntz">Joe Zuntz (Oxford)</a></li>
</ul>
<p>Comments, corrections &amp; suggestions:</p>
<ul class="simple">
<li>Eric Agol (UWash)</li>
<li>Jo Bovy (IAS)</li>
<li>Jacqueline Chen (MIT)</li>
<li>John Gizis (Delaware)</li>
<li>Jonathan Goodman (NYU)</li>
<li>Jennifer Piscionere (Vanderbilt)</li>
</ul>
</div>
<div class="section" id="license-attribution">
<h2>License &amp; Attribution<a class="headerlink" href="#license-attribution" title="Permalink to this headline">¶</a></h2>
<p>Copyright 2010-2013 Dan Foreman-Mackey and contributors.</p>
<p>emcee is free software made available under the MIT License. For details
see <a class="reference external" href="license">LICENSE</a>.</p>
<p>If you make use of emcee in your work, please cite our paper
(<a class="reference external" href="http://arxiv.org/abs/1202.3665">arXiv</a>,
<a class="reference external" href="http://adsabs.harvard.edu/abs/2013PASP..125..306F">ADS</a>,
<a class="reference external" href="http://adsabs.harvard.edu/cgi-bin/nph-bib_query?bibcode=2013PASP..125..306F&amp;data_type=BIBTEX">BibTeX</a>)
and consider adding your paper to the <a class="reference internal" href="testimonials/#testimonials"><em>Testimonials</em></a> list.</p>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<div class="section" id="upcoming">
<h3>2.1.0 (upcoming)<a class="headerlink" href="#upcoming" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Removing dependence on <tt class="docutils literal"><span class="pre">acor</span></tt> extension.</li>
<li>Added arguments to <tt class="docutils literal"><span class="pre">PTSampler</span></tt> function.</li>
<li>Added automatic load-balancing for MPI runs.</li>
<li>Added custom load-balancing for MPI and multiprocessing.</li>
</ul>
</div>
<div class="section" id="id1">
<h3>2.0.0 (2013-11-17)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Re-licensed under the MIT license!</strong></li>
<li>Clearer less verbose documentation.</li>
<li>Added checks for parameters becoming infinite or NaN.</li>
<li>Added checks for log-probability becoming NaN.</li>
<li>Improved parallelization and various other tweaks in <tt class="docutils literal"><span class="pre">PTSampler</span></tt>.</li>
</ul>
</div>
<div class="section" id="id2">
<h3>1.2.0 (2013-01-30)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a parallel tempering sampler <tt class="docutils literal"><span class="pre">PTSampler</span></tt>.</li>
<li>Added instructions and utilities for using <tt class="docutils literal"><span class="pre">emcee</span></tt> with <tt class="docutils literal"><span class="pre">MPI</span></tt>.</li>
<li>Added <tt class="docutils literal"><span class="pre">flatlnprobability</span></tt> property to the <tt class="docutils literal"><span class="pre">EnsembleSampler</span></tt> object
to be consistent with the <tt class="docutils literal"><span class="pre">flatchain</span></tt> property.</li>
<li>Updated document for publication in PASP.</li>
<li>Various bug fixes.</li>
</ul>
</div>
<div class="section" id="id3">
<h3>1.1.3 (2012-11-22)<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Made the packaging system more robust even when numpy is not installed.</li>
</ul>
</div>
<div class="section" id="id4">
<h3>1.1.2 (2012-08-06)<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Another bug fix related to metadata blobs: the shape of the final <tt class="docutils literal"><span class="pre">blobs</span></tt>
object was incorrect and all of the entries would generally be identical
because we needed to copy the list that was appended at each step. Thanks
goes to Jacqueline Chen (MIT) for catching this problem.</li>
</ul>
</div>
<div class="section" id="id5">
<h3>1.1.1 (2012-07-30)<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed bug related to metadata blobs. The sample function was yielding
the <tt class="docutils literal"><span class="pre">blobs</span></tt> object even when it wasn&#8217;t expected.</li>
</ul>
</div>
<div class="section" id="id6">
<h3>1.1.0 (2012-07-28)<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow the <tt class="docutils literal"><span class="pre">lnprobfn</span></tt> to return arbitrary &#8220;blobs&#8221; of data as well as the
log-probability.</li>
<li>Python 3 compatible (thanks Alex Conley)!</li>
<li>Various speed ups and clean ups in the core code base.</li>
<li>New documentation with better examples and more discussion.</li>
</ul>
</div>
<div class="section" id="id7">
<h3>1.0.1 (2012-03-31)<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed transpose bug in the usage of <tt class="docutils literal"><span class="pre">acor</span></tt> in <tt class="docutils literal"><span class="pre">EnsembleSampler</span></tt>.</li>
</ul>
</div>
<div class="section" id="id8">
<h3>1.0.0 (2012-02-15)<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Initial release.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="#">
    <img class="logo" src="_static/logo-sidebar.png" alt="Logo"/>
  </a>
</p>

<p>
    emcee is an extensible, pure-Python implementation of
    Goodman &amp; Weare's
    <a href="http://msp.berkeley.edu/camcos/2010/5-1/p04.xhtml">Affine
        Invariant Markov chain Monte Carlo (MCMC) Ensemble sampler</a>.
    It's designed for Bayesian parameter estimation and it's really sweet!
</p>


<h3>Feedback</h3>
<p>
  Feedback is greatly appreciated. If you have any questions, comments,
  issues or anything else really, <a href="mailto:danfm@nyu.edu">
  shoot me an email</a>.
</p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy; Copyright 2012–2013, Dan Foreman-Mackey & contributors.
    </div>
    <a href="https://github.com/dfm/emcee" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;"
            src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
            alt="Fork me on GitHub"  class="github"/>
    </a>

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-22909046-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
    </script>

    <script type="text/javascript">
        var _gauges = _gauges || [];
        (function() {
         var t   = document.createElement('script');
         t.type  = 'text/javascript';
         t.async = true;
         t.id    = 'gauges-tracker';
         t.setAttribute('data-site-id', '510fb7df613f5d10200000c4');
         t.src = '//secure.gaug.es/track.js';
         var s = document.getElementsByTagName('script')[0];
         s.parentNode.insertBefore(t, s);
        })();
    </script>
  </body>
</html>