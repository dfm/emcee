

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>emcee &mdash; emcee 3.0.0-dev documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="emcee 3.0.0-dev documentation" href="#"/>
        <link rel="next" title="Installation" href="user/install/"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="#" class="fa fa-home"> emcee</a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="user/install/">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/install/#using-pip">Using pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#from-source">From source</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#bleeding-edge-development-version">Bleeding edge development version</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#test-the-installation">Test the installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/porting/">Porting your code to emcee3 from earlier versions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/line/">Tutorial: Fitting a Model to Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/line/#generating-fake-data-from-the-model">Generating fake data from the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/line/#maximum-likelihood-solution">Maximum-likelihood solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/line/#building-the-probabilistic-model">Building the probabilistic model</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/line/#sampling-from-the-posterior-probability">Sampling from the posterior probability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/mixture-models/">Tutorial: Practical mixture models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/mixture-models/#the-basic-model">The basic model</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/mixture-models/#the-marginalized-likelihood">The marginalized likelihood</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/mixture-models/#mixture-membership-probabilities">Mixture membership probabilities</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/#model-building">Model Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#sampling">Sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#moves">Moves</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">emcee</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li>emcee</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/dfm/emcee/blob/emcee3/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">

            <div class="admonition warning">
              <p class="first admonition-title">Version Warning</p>
              <p class="last">
                This documentation is for the development version of
                <strong>emcee</strong> ("emcee3") and it isn't
                backwards-compatible with earlier stable versions.
                If you're using an earlier version, get that documentation
                <a href="http://dfm.io/emcee">here</a>.
              </p>
            </div>

            
  <div class="section" id="emcee">
<h1>emcee<a class="headerlink" href="#emcee" title="Permalink to this headline">¶</a></h1>
<div class="section" id="seriously-kick-ass-mcmc">
<h2>Seriously Kick-Ass MCMC<a class="headerlink" href="#seriously-kick-ass-mcmc" title="Permalink to this headline">¶</a></h2>
<p><strong>emcee</strong> is an MIT licensed pure-Python implementation
of Goodman &amp; Weare&#8217;s <a class="reference external" href="http://msp.berkeley.edu/camcos/2010/5-1/p04.xhtml">Affine Invariant Markov chain Monte Carlo (MCMC)
Ensemble sampler</a> and
these pages will show you how to use it.
This documentation won&#8217;t teach you too much about MCMC but there are a lot
of resources available for that (try <a class="reference external" href="http://www.inference.phy.cam.ac.uk/mackay/itila/book.html">this one</a>).
We also <a class="reference external" href="http://arxiv.org/abs/1202.3665">published a paper</a> explaining
the <strong>emcee</strong> algorithm and implementation in detail.
<strong>emcee</strong> has been used in <a class="reference external" href="testimonials">quite a few projects in the astrophysical
literature</a> and it is being actively developed on <a class="reference external" href="https://github.com/dfm/emcee">GitHub</a>.</p>
</div>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>If you wanted to draw samples from a multidimensional Gaussian, you would do
something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">emcee</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">emcee</span><span class="o">.</span><span class="n">BaseWalker</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">lnpriorfn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">0.0</span>
    <span class="k">def</span> <span class="nf">lnlikefn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">ndim</span><span class="p">,</span> <span class="n">nwalkers</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span>
<span class="n">ensemble</span> <span class="o">=</span> <span class="n">emcee</span><span class="o">.</span><span class="n">Ensemble</span><span class="p">(</span><span class="n">MyModel</span><span class="p">(),</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">nwalkers</span><span class="p">,</span> <span class="n">ndim</span><span class="p">))</span>
<span class="n">sampler</span> <span class="o">=</span> <span class="n">emcee</span><span class="o">.</span><span class="n">Sampler</span><span class="p">()</span>
<span class="n">sampler</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">ensemble</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>A more complete example is available in the <a class="reference external" href="user/quickstart">quickstart documentation</a>.</p>
</div>
<div class="section" id="user-guide">
<h2>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="user/install/">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/install/#using-pip">Using pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#from-source">From source</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#bleeding-edge-development-version">Bleeding edge development version</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/install/#test-the-installation">Test the installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/porting/">Porting your code to emcee3 from earlier versions</a></li>
</ul>
</div>
</div>
<div class="section" id="tutorials">
<h2>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/line/">Tutorial: Fitting a Model to Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/line/#generating-fake-data-from-the-model">Generating fake data from the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/line/#maximum-likelihood-solution">Maximum-likelihood solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/line/#building-the-probabilistic-model">Building the probabilistic model</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/line/#sampling-from-the-posterior-probability">Sampling from the posterior probability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/mixture-models/">Tutorial: Practical mixture models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/mixture-models/#the-basic-model">The basic model</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/mixture-models/#the-marginalized-likelihood">The marginalized likelihood</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/mixture-models/#mixture-membership-probabilities">Mixture membership probabilities</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/#model-building">Model Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#sampling">Sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/#moves">Moves</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<p>Author:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/dfm">Dan Foreman-Mackey</a></li>
</ul>
<p>Direct contributions to the code base:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/RuthAngus">Ruth Angus</a></li>
<li><a class="reference external" href="https://github.com/bencebeky">Bence Béky</a></li>
<li><a class="reference external" href="https://github.com/fredRos">Frederik Beaujean</a></li>
<li><a class="reference external" href="https://github.com/aconley">Alex Conley</a></li>
<li><a class="reference external" href="https://github.com/farr">Will Meierjurgen Farr</a></li>
<li><a class="reference external" href="https://github.com/juliohm">Júlio Hoffimann Mendes</a></li>
<li><a class="reference external" href="https://github.com/davidwhogg">David W. Hogg</a></li>
<li><a class="reference external" href="https://github.com/dstndstn">Dustin Lang</a></li>
<li><a class="reference external" href="https://github.com/drphilmarshall">Phil Marshall</a></li>
<li><a class="reference external" href="https://github.com/demitri">Demitri Muna</a></li>
<li><a class="reference external" href="https://github.com/adrn">Adrian Price-Whelan</a></li>
<li><a class="reference external" href="https://github.com/jeremysanders">Jeremy Sanders</a></li>
<li><a class="reference external" href="https://github.com/lpsinger">Leo Singer</a></li>
<li><a class="reference external" href="https://bitbucket.org/manodeep/">Manodeep Sinha</a></li>
<li><a class="reference external" href="https://github.com/mtazzari">Marco Tazzari</a></li>
<li><a class="reference external" href="https://github.com/eteq">Erik Tollerud</a></li>
<li><a class="reference external" href="https://github.com/mindriot101">Simon Walker</a></li>
<li><a class="reference external" href="https://github.com/pkgw">Peter K. G. Williams</a></li>
<li><a class="reference external" href="https://github.com/joezuntz">Joe Zuntz</a></li>
</ul>
<p>Comments, corrections &amp; suggestions:</p>
<ul class="simple">
<li>Eric Agol</li>
<li>Jo Bovy</li>
<li>Andrew Bradshaw</li>
<li>Jacqueline Chen</li>
<li>John Gizis</li>
<li>Jonathan Goodman</li>
<li>Jennifer Piscionere</li>
</ul>
</div>
<div class="section" id="license-attribution">
<h2>License &amp; Attribution<a class="headerlink" href="#license-attribution" title="Permalink to this headline">¶</a></h2>
<p>Copyright 2010-2013 Dan Foreman-Mackey and contributors.</p>
<p>emcee is free software made available under the MIT License. For details
see <a class="reference external" href="license">LICENSE</a>.</p>
<p>If you make use of emcee in your work, please cite our paper
(<a class="reference external" href="http://arxiv.org/abs/1202.3665">arXiv</a>,
<a class="reference external" href="http://adsabs.harvard.edu/abs/2013PASP..125..306F">ADS</a>,
<a class="reference external" href="http://adsabs.harvard.edu/cgi-bin/nph-bib_query?bibcode=2013PASP..125..306F&amp;data_type=BIBTEX">BibTeX</a>)
and consider adding your paper to the <a class="reference internal" href="testimonials/#testimonials"><em>Testimonials</em></a> list.</p>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<div class="section" id="upcoming">
<h3>2.1.0 (upcoming)<a class="headerlink" href="#upcoming" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Removing dependence on <tt class="docutils literal"><span class="pre">acor</span></tt> extension.</li>
<li>Added arguments to <tt class="docutils literal"><span class="pre">PTSampler</span></tt> function.</li>
<li>Added automatic load-balancing for MPI runs.</li>
<li>Added custom load-balancing for MPI and multiprocessing.</li>
<li>New default multiprocessing pool that supports <tt class="docutils literal"><span class="pre">^C</span></tt>.</li>
</ul>
</div>
<div class="section" id="id1">
<h3>2.0.0 (2013-11-17)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Re-licensed under the MIT license!</strong></li>
<li>Clearer less verbose documentation.</li>
<li>Added checks for parameters becoming infinite or NaN.</li>
<li>Added checks for log-probability becoming NaN.</li>
<li>Improved parallelization and various other tweaks in <tt class="docutils literal"><span class="pre">PTSampler</span></tt>.</li>
</ul>
</div>
<div class="section" id="id2">
<h3>1.2.0 (2013-01-30)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a parallel tempering sampler <tt class="docutils literal"><span class="pre">PTSampler</span></tt>.</li>
<li>Added instructions and utilities for using <tt class="docutils literal"><span class="pre">emcee</span></tt> with <tt class="docutils literal"><span class="pre">MPI</span></tt>.</li>
<li>Added <tt class="docutils literal"><span class="pre">flatlnprobability</span></tt> property to the <tt class="docutils literal"><span class="pre">EnsembleSampler</span></tt> object
to be consistent with the <tt class="docutils literal"><span class="pre">flatchain</span></tt> property.</li>
<li>Updated document for publication in PASP.</li>
<li>Various bug fixes.</li>
</ul>
</div>
<div class="section" id="id3">
<h3>1.1.3 (2012-11-22)<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Made the packaging system more robust even when numpy is not installed.</li>
</ul>
</div>
<div class="section" id="id4">
<h3>1.1.2 (2012-08-06)<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Another bug fix related to metadata blobs: the shape of the final <tt class="docutils literal"><span class="pre">blobs</span></tt>
object was incorrect and all of the entries would generally be identical
because we needed to copy the list that was appended at each step. Thanks
goes to Jacqueline Chen (MIT) for catching this problem.</li>
</ul>
</div>
<div class="section" id="id5">
<h3>1.1.1 (2012-07-30)<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed bug related to metadata blobs. The sample function was yielding
the <tt class="docutils literal"><span class="pre">blobs</span></tt> object even when it wasn&#8217;t expected.</li>
</ul>
</div>
<div class="section" id="id6">
<h3>1.1.0 (2012-07-28)<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow the <tt class="docutils literal"><span class="pre">lnprobfn</span></tt> to return arbitrary &#8220;blobs&#8221; of data as well as the
log-probability.</li>
<li>Python 3 compatible (thanks Alex Conley)!</li>
<li>Various speed ups and clean ups in the core code base.</li>
<li>New documentation with better examples and more discussion.</li>
</ul>
</div>
<div class="section" id="id7">
<h3>1.0.1 (2012-03-31)<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed transpose bug in the usage of <tt class="docutils literal"><span class="pre">acor</span></tt> in <tt class="docutils literal"><span class="pre">EnsembleSampler</span></tt>.</li>
</ul>
</div>
<div class="section" id="id8">
<h3>1.0.0 (2012-02-15)<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Initial release.</li>
</ul>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="user/install/" class="btn btn-neutral float-right" title="Installation"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2014 Dan Foreman-Mackey &amp; contributors.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'',
            VERSION:'3.0.0-dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="_static/js/analytics.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>